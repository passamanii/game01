[gd_scene load_steps=33 format=3 uid="uid://bd7b6s8i30g8u"]

[ext_resource type="PackedScene" uid="uid://bg32vn8i05own" path="res://Scenes/Bosses/boss_base.tscn" id="1_avrsj"]
[ext_resource type="Script" uid="uid://cnyp058pxepgi" path="res://Scenes/Bosses/tamandua-bandeira/tamandua_bandeira.gd" id="2_1uwue"]
[ext_resource type="Texture2D" uid="uid://bm6is7hb8amvw" path="res://Assets/Sprites/Boss/tamandua-bandeira-sprite.png" id="2_n4adx"]
[ext_resource type="PackedScene" uid="uid://c4p64n0d70yq1" path="res://Scenes/Bosses/tamandua-bandeira/tongue.tscn" id="3_5fvcm"]
[ext_resource type="AnimationNodeBlendSpace2D" uid="uid://d0033aq2stv6w" path="res://Scenes/Bosses/tamandua-bandeira/tamandua_bandeira_t_pose_move.tres" id="3_n4adx"]
[ext_resource type="PackedScene" uid="uid://cfgam13lgq32r" path="res://Scenes/Bosses/tamandua-bandeira/ant.tscn" id="4_i8rk1"]
[ext_resource type="Script" uid="uid://rsy1vsg1ms4v" path="res://StateMachines/state_machine.gd" id="5_3yrtn"]
[ext_resource type="Script" uid="uid://dt182l20aqyqg" path="res://Scenes/Bosses/tamandua-bandeira/dash.gd" id="6_jptmt"]
[ext_resource type="Script" uid="uid://dyydulo42fjx4" path="res://Scenes/Bosses/tamandua-bandeira/tongue_state.gd" id="7_jptmt"]
[ext_resource type="Script" uid="uid://0p4xumkt18g4" path="res://Scenes/Bosses/tamandua-bandeira/idle.gd" id="8_apvxv"]
[ext_resource type="Script" uid="uid://dmdl43w5vg1de" path="res://Scenes/Bosses/tamandua-bandeira/ants.gd" id="9_ba8r1"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_1uwue"]
radius = 7.375
height = 24.625

[sub_resource type="Animation" id="Animation_ba8r1"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Texture:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0009999999),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0, 0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Texture:flip_h")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_jptmt"]
resource_name = "back-t-pose"
length = 0.2
loop_mode = 1
step = 0.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Texture:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.0011530034, 0.09800511),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [16, 17]
}

[sub_resource type="Animation" id="Animation_3yrtn"]
resource_name = "front-t-pose"
length = 0.2
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Texture:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [12, 13]
}

[sub_resource type="Animation" id="Animation_dc5nh"]
resource_name = "getting-up"
length = 0.4
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Texture:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [4, 5, 6, 7]
}

[sub_resource type="Animation" id="Animation_sagrw"]
resource_name = "idle"
length = 0.6
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Texture:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0, 1]
}

[sub_resource type="Animation" id="Animation_5fvcm"]
resource_name = "left-t-pose"
length = 0.2
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Texture:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [8, 9]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Texture:flip_h")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.0009999999),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_i8rk1"]
resource_name = "right-t-pose"
length = 0.2
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Texture:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [8, 9]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Texture:flip_h")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_apvxv"]
resource_name = "sitting"
length = 0.8
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Texture:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [20, 21, 22, 23]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_w3g0u"]
_data = {
&"RESET": SubResource("Animation_ba8r1"),
&"back-t-pose": SubResource("Animation_jptmt"),
&"front-t-pose": SubResource("Animation_3yrtn"),
&"getting-up": SubResource("Animation_dc5nh"),
&"idle": SubResource("Animation_sagrw"),
&"left-t-pose": SubResource("Animation_5fvcm"),
&"right-t-pose": SubResource("Animation_i8rk1"),
&"sitting": SubResource("Animation_apvxv")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_1uwue"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_sagrw"]
animation = &"getting-up"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_3yrtn"]
animation = &"sitting"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_apvxv"]
advance_mode = 2
advance_condition = &"t_pose"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_dc5nh"]
advance_mode = 2
advance_condition = &"sit"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jptmt"]
advance_mode = 2
advance_condition = &"idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ba8r1"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5fvcm"]
advance_mode = 2
advance_condition = &"idle"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_i8rk1"]
states/End/position = Vector2(1097, 100)
states/Idle/node = SubResource("AnimationNodeAnimation_1uwue")
states/Idle/position = Vector2(328, 100)
states/getting-up/node = SubResource("AnimationNodeAnimation_sagrw")
states/getting-up/position = Vector2(512, 100)
states/sitting/node = SubResource("AnimationNodeAnimation_3yrtn")
states/sitting/position = Vector2(512, 201)
states/t-pose-direction/node = ExtResource("3_n4adx")
states/t-pose-direction/position = Vector2(328, 201)
transitions = ["Idle", "getting-up", SubResource("AnimationNodeStateMachineTransition_apvxv"), "t-pose-direction", "sitting", SubResource("AnimationNodeStateMachineTransition_dc5nh"), "Start", "Idle", SubResource("AnimationNodeStateMachineTransition_jptmt"), "getting-up", "t-pose-direction", SubResource("AnimationNodeStateMachineTransition_ba8r1"), "sitting", "Idle", SubResource("AnimationNodeStateMachineTransition_5fvcm")]
graph_offset = Vector2(-145, 45)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_mjnbi"]
radius = 11.25
height = 33.25

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_vnjcy"]
radius = 13.0
height = 36.875

[node name="TamanduaBandeira" node_paths=PackedStringArray("tongue_marker", "tongue_timer") instance=ExtResource("1_avrsj")]
collision_mask = 1
script = ExtResource("2_1uwue")
TONGUE = ExtResource("3_5fvcm")
tongue_marker = NodePath("TongueMarker")
tongue_timer = NodePath("TongueTimer")
ANT = ExtResource("4_i8rk1")
dash_speed = 1500.0
dash_duration = 1.25
max_health = 1000
speed = 600

[node name="Texture" parent="." index="0"]
texture = ExtResource("2_n4adx")
flip_h = true
hframes = 4
vframes = 6

[node name="Collision" parent="." index="1"]
position = Vector2(0, 7.125)
rotation = 1.5707964
shape = SubResource("CapsuleShape2D_1uwue")

[node name="AnimationPlayer" parent="." index="2"]
libraries = {
&"": SubResource("AnimationLibrary_w3g0u")
}
autoplay = "idle"

[node name="AnimationTree" parent="." index="3"]
tree_root = SubResource("AnimationNodeStateMachine_i8rk1")
parameters/conditions/idle = false
parameters/conditions/sit = false
parameters/conditions/t_pose = false
parameters/t-pose-direction/blend_position = Vector2(0.85673356, -0.03139019)

[node name="HitboxCollision" parent="Hitbox" index="0"]
position = Vector2(0, 2.3125)
rotation = 1.5707964
shape = SubResource("CapsuleShape2D_mjnbi")

[node name="HurtboxCollision" parent="Hurtbox" index="0"]
rotation = 1.5707964
shape = SubResource("CapsuleShape2D_vnjcy")

[node name="TongueTimer" type="Timer" parent="." index="6"]
wait_time = 10.0
one_shot = true

[node name="AntsTimer" type="Timer" parent="." index="7"]
wait_time = 15.0
one_shot = true

[node name="StateMachine" type="Node" parent="." index="8" node_paths=PackedStringArray("initial_state")]
script = ExtResource("5_3yrtn")
initial_state = NodePath("Idle")

[node name="Dash" type="Node" parent="StateMachine" index="0" node_paths=PackedStringArray("enemy")]
script = ExtResource("6_jptmt")
enemy = NodePath("../..")

[node name="Tongue" type="Node" parent="StateMachine" index="1" node_paths=PackedStringArray("enemy")]
script = ExtResource("7_jptmt")
enemy = NodePath("../..")

[node name="Idle" type="Node" parent="StateMachine" index="2" node_paths=PackedStringArray("enemy")]
script = ExtResource("8_apvxv")
enemy = NodePath("../..")

[node name="Ants" type="Node" parent="StateMachine" index="3" node_paths=PackedStringArray("enemy")]
script = ExtResource("9_ba8r1")
enemy = NodePath("../..")

[node name="TongueMarker" type="Marker2D" parent="." index="9"]
position = Vector2(0, 0.5)

[connection signal="timeout" from="TongueTimer" to="StateMachine/Tongue" method="_on_tongue_timer_timeout"]
[connection signal="timeout" from="AntsTimer" to="StateMachine/Ants" method="_on_ants_timer_timeout"]
