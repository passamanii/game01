[gd_resource type="ShaderMaterial" load_steps=2 format=3 uid="uid://cfu05o67vwfhw"]

[sub_resource type="Shader" id="Shader_aamwi"]
code = "shader_type canvas_item;

uniform float line_thickness : hint_range(0, 20) = 1.0;
uniform float sin_frequency : hint_range(0.1, 2.0) = 0.5;
uniform float sin_offset : hint_range(0.0, 360.0) = 0.0;
uniform float light_offset : hint_range(0.0, 1.0) = 0.5;

void fragment() {
	vec2 size = TEXTURE_PIXEL_SIZE * line_thickness;
	
	float outline = texture(TEXTURE, UV + vec2(-size.x, 0)).a;
	outline += texture(TEXTURE, UV + vec2(0, size.y)).a;
	outline += texture(TEXTURE, UV + vec2(size.x, 0)).a;
	outline += texture(TEXTURE, UV + vec2(0, -size.y)).a;
	outline += texture(TEXTURE, UV + vec2(-size.x, size.y)).a;
	outline += texture(TEXTURE, UV + vec2(size.x, size.y)).a;
	outline += texture(TEXTURE, UV + vec2(-size.x, -size.y)).a;
	outline += texture(TEXTURE, UV + vec2(size.x, -size.y)).a;
	outline = min(outline, 1.0);
	
	vec4 animated_line_color = vec4(
		light_offset + sin(2.0*3.14*sin_frequency*TIME),
		light_offset + sin(2.0*3.14*sin_frequency*TIME + radians(120.0)),
		light_offset + sin(2.0*3.14*sin_frequency*TIME + radians(240.0)),
		1.0
	);
	
	vec4 color = texture(TEXTURE, UV);
	vec4 base = color * COLOR; // ← AQUI está a correção
	
	COLOR = mix(base, animated_line_color, outline - color.a);
}"

[resource]
shader = SubResource("Shader_aamwi")
shader_parameter/line_thickness = 16.30000077425
shader_parameter/sin_frequency = 1.00000004424012
shader_parameter/sin_offset = 0.0
shader_parameter/light_offset = 0.2790000132525
